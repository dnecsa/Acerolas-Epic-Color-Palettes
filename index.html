<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <title>acerola's epic color palettes</title>
</head>

<style>
    body {
        font-family: 'Poppins', sans-serif;
        background-color: #1a1a1a;
        color: #ffffff;
        line-height: 1.6;
        padding: 2rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    h1 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        text-align: center;
    }

    #color-form {
        background-color: #2a2a2a;
        padding: 2rem;
        border-radius: 10px;
        margin-bottom: 2rem;
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        align-items: center;
    }

    #color-form label {
        font-weight: 600;
    }

    #color-form select,
    #color-form input[type="number"],
    #color-form input[type="submit"] {
        padding: 0.5rem 1rem;
        border: none;
        border-radius: 5px;
        background-color: #3a3a3a;
        color: #ffffff;
        font-size: 1rem;
    }

    #color-form input[type="submit"] {
        background-color: #4CAF50;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    #color-form input[type="submit"]:hover {
        background-color: #45a049;
    }

    #click-instructions {
        text-align: center;
        margin-bottom: 1rem;
        font-style: italic;
    }

    #result {
        display: flex;
        flex-wrap: wrap;
        gap: 2rem;
        align-items: flex-start;
    }

    #palettes {
        flex: 1;
        min-width: 300px;
    }

    .palette {
        background-color: #2a2a2a;
        padding: 1rem;
        border-radius: 10px;
        margin-bottom: 1rem;
    }

    .palette-label {
        font-weight: 600;
        margin-bottom: 0.5rem;
        display: block;
    }

    .palette-colors {
        display: flex;
        flex-wrap: wrap;
        gap: 0.35rem;
        padding: 0.5rem;
    }

    .palette-color {
        width: 5em;
        height: 5em;
        border-radius: 5px;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .palette-color:hover {
        transform: scale(1.05);
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    }

    .palette-color.selected {
        transform: scale(1.1);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
    }

    #details {
        flex: 0 0 300px;
        background-color: #2a2a2a;
        padding: 2rem;
        border-radius: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        position: sticky;
        top: 2rem;
    }

    #details-color {
        width: 150px;
        height: 150px;
        border-radius: 10px;
        margin-bottom: 1rem;
    }

    #details span {
        margin-bottom: 0.5rem;
        font-size: 1.1rem;
    }

    #copy-button {
        margin-top: 1rem;
        padding: 0.5rem 1rem;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    #copy-button:hover {
        background-color: #45a049;
    }
</style>

<body>
    <h1>acerola's epic color palettes</h1>
    <p>Updated to automatically copy the hex code without having to click copy, also improved ui</p>
    <p>Generate as many palettes as you want until you find one you like <br>1 = HSL <br>2 = HSV <br>3 = OKLAB.</p>
    <form id="color-form">
        <label for="color-mode">Hue mode:</label>
        <select id="color-mode" name="color-mode">
            <option value="monochromatic">Monochromatic</option>
            <option value="analagous">Analagous</option>
            <option value="complementary">Complementary</option>
            <option value="triadic complementary">Triadic Complementary</option>
            <option value="tetradic complementary">Tetradic Complementary</option>
        </select>
        <label for="color-count">Color count:</label>
        <input id="color-count" name="color-count" type="number" min="3" max="16" value="8" />
        <input type="submit" value="Generate" />
    </form>
    <p id="click-instructions">click a color to see hex + rgb and automatically copy it to clipboard</p>
    <div id="result">
        <div id="palettes"></div>
        <div id="details">
            <div id="details-color"></div>
            <span id="details-hex"></span>
            <span id="details-rgb"></span>
            <button id="copy-button" onclick="copyToClipboard()">Copy Hex</button>
        </div>
    </div>
    <script src="./colors.js"></script>
    <script>
        const getHexFromRGB = (rgb) => `#${Number(rgb[0]).toString(16).padStart(2, "0")}${Number(rgb[1]).toString(16).padStart(2, "0")}${Number(rgb[2]).toString(16).padStart(2, "0")}`;

        const getFakeResult = () => {
            const palettesCount = 4;
            const colorsCounts = 16;
            const palettes = [];
            for (let i = 0; i < palettesCount; i++) {
                const colors = [];
                for (let j = 0; j < colorsCounts; j++) {
                    colors.push({
                        rgb: [Math.floor(Math.random() * 256), Math.floor(Math.random() * 256), Math.floor(Math.random() * 256)]
                    });
                }
                palettes.push({
                    colors
                });
            }
            return palettes;
        }

        const handleResult = (palettes) => {
            const palettesElement = document.getElementById("palettes");
            palettesElement.innerHTML = "";
            palettes.forEach((palette, paletteIndex) => {
                const paletteElement = document.createElement("div");
                paletteElement.classList.add("palette");
                palettesElement.appendChild(paletteElement);
                
                const paletteLabelElement = document.createElement("span");
                paletteLabelElement.innerText = `Palette ${paletteIndex + 1}:`
                paletteLabelElement.classList.add("palette-label");
                paletteElement.appendChild(paletteLabelElement);
                
                const paletteColorsElement = document.createElement("div");
                paletteColorsElement.classList.add("palette-colors");
                paletteElement.appendChild(paletteColorsElement);
                
                for (const color of palette) {
                    const hex = getHexFromRGB(color);
                    const paletteColorElement = document.createElement("div");
                    paletteColorElement.addEventListener("click", () => {
                        updateColorDetails(hex, color);
                        highlightSelectedColor(paletteColorElement);
                    });
                    paletteColorElement.style.backgroundColor = hex;
                    paletteColorElement.classList.add("palette-color");
                    paletteColorsElement.appendChild(paletteColorElement);
                }
            });
        }

        function updateColorDetails(hex, color) {
            const detailsColor = document.getElementById("details-color");
            const detailsHex = document.getElementById("details-hex");
            const detailsRGB = document.getElementById("details-rgb");
            detailsColor.style.backgroundColor = hex;
            detailsHex.innerText = `${hex}`;
            detailsRGB.innerText = `RGB: (${color[0]}, ${color[1]}, ${color[2]})`;
            
            navigator.clipboard.writeText(hex).then(() => {
                console.log('Hex code copied to clipboard');
                showCopiedFeedback();
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }

        function highlightSelectedColor(element) {
            const allColors = document.querySelectorAll('.palette-color');
            allColors.forEach(color => color.classList.remove('selected'));
            element.classList.add('selected');
        }

        function showCopiedFeedback() {
            const copyButton = document.getElementById("copy-button");
            copyButton.textContent = "Copied!";
            setTimeout(() => {
                copyButton.textContent = "Copy Hex";
            }, 1500);
        }

        document.getElementById("color-form").addEventListener("submit", (e) => {
            e.preventDefault();
            const colorMode = document.getElementById("color-mode");
            const colorCount = document.getElementById("color-count");
            const detailsColor = document.getElementById("details-color");
            const detailsHex = document.getElementById("details-hex");
            const detailsRGB = document.getElementById("details-rgb");
            detailsColor.style.backgroundColor = "";
            detailsHex.innerText = "";
            detailsRGB.innerText = "";
            const result = generatePalettes(colorMode.value, colorCount.value);
            handleResult(result);
            document.getElementById("click-instructions").style.display = "block";
        });
    </script>
</body>

</html>